const input=document.querySelector(".js-input "),btn=document.querySelector(".js-button-search"),favourites=document.querySelector(".js-favouritesList"),results=document.querySelector(".js-resultsList"),reset=document.querySelector(".js-reset"),iconFav=document.querySelector(".js-fav");let actors=[],favouriteCharacters=[];function renderCharacters(e){let t="",r="",a=void 0===e?actors:e;for(const e of a){r=-1===favouriteCharacters.findIndex(t=>t.char_id===parseInt(e.char_id))?"":"selected",t+=`<li class= " event">\n    \n      <article class ="${r} article js-articles" id= "${e.char_id}" >\n      <img class="img" src=${e.img} >\n      <h3 class = "name"> ${e.name} </h3>\n      <p class = "status">${e.status}</p>\n      </article>\n      </li>`}results.innerHTML=t,addCharactersEvent()}function filterCharacters(){const e=input.value.toLowerCase();return actors.filter(t=>t.name.toLowerCase().includes(e))}function handleClickSearch(e){console.log("click"),e.preventDefault();const t=filterCharacters();console.log(t),renderCharacters(t)}function addCharactersEvent(){const e=document.querySelectorAll(".js-articles");for(const r of e)r.addEventListener("click",t);function t(e){e.currentTarget.classList.toggle("selected");const t=actors.find(t=>t.char_id===parseInt(e.currentTarget.id)),r=favouriteCharacters.findIndex(t=>t.char_id===parseInt(e.currentTarget.id));-1===r?favouriteCharacters.push(t):favouriteCharacters.splice(r,1),localStorage.setItem("favourites",JSON.stringify(favouriteCharacters)),renderFavourites()}}function renderFavourites(){let e="";for(const t of favouriteCharacters)e+=`<li>\n        <article class ="article-fav js-articlesFav" >\n        <i class=" js-bDelete fa-solid fa-user-minus" id= "${t.char_id}"></i>\n        <img class="img-fav" src=${t.img}>\n        <h3 class = "name-fav"> ${t.name}</h3>\n        <p class = "status-fav">${t.status}</p>\n        </article>\n        </li>`;favourites.innerHTML=e,addIconsEvent()}function getFavFromLocal(){const e=JSON.parse(localStorage.getItem("favourites"));null!==e&&(favouriteCharacters=e,renderFavourites())}function addIconsEvent(){const e=document.querySelectorAll(".js-bDelete");for(const t of e)t.addEventListener("click",handleIcons)}function handleIcons(e){const t=favouriteCharacters.findIndex(t=>t.char_id===parseInt(e.currentTarget.id));favouriteCharacters.splice(t,1),localStorage.setItem("favourites",JSON.stringify(favouriteCharacters)),renderFavourites(),renderCharacters()}function handleReset(){favouriteCharacters=[],renderFavourites(),renderCharacters(),localStorage.removeItem("favourites")}function handleClickFav(){reset.remove("hidden"),iconFav.remove("hidden"),console.log("click")}fetch("./assets/data/characters.json").then(e=>e.json()).then(e=>{actors=e,getFavFromLocal(),renderFavourites(),renderCharacters()}),btn.addEventListener("click",handleClickSearch),reset.addEventListener("click",handleReset),results.addEventListener("click",handleClickFav);